#!/usr/bin/env ruby

input = ARGV # ARGV holds the command line arguments that were passed in
NO_NAME = "I'd cheer for you, if only I knew who you were :("
NO_BDAY = "I would wish you a Happy Birthday, if I knew when that was!"
NO_NAME_OR_BDAY =  <<EOS
I'd cheer for you, if only I knew who you were :(
I would wish you a Happy Birthday, if I knew when that was!
EOS


if input.size == 0 && input.empty?
  print NO_NAME
  exit
end


if !!/\d/.match(input[0]) && input[1].nil?
  print NO_NAME
  exit
end

if !!/\s/.match(input[0]) && input[1].nil?
  print NO_NAME
  exit
end

if !!/\W/.match(input[0]) && !!/\W/.match(input[1])
  print NO_NAME_OR_BDAY
  exit
end

parsed_input = input[0][/[a-zA-Z]*(-)?[a-zA-Z]*/]

if input.size == 1 && input[0].empty?
  print NO_NAME
  exit
end

if (input[0].size == parsed_input.size) && (input.size == 1)
  input_caps = input[0].upcase
  input_caps.each_char { |x|
    if !!/A|E|I|O|U/.match(x)
      puts "Give me an... #{x}"
    elsif !!/-/.match(x)
      #if name has dash, don't print the dash in the cheer
    else
      puts "Give me a... #{x}"
    end
  }
  puts "#{input_caps}'s just GRAND!"
  exit
end

if input.size == 2
  if (!/\w+/.match(input[0]) && !/\w+(-)\w+/.match(input[0])) && !/\d{2}(\/)\d{2}/.match(input[1])
    print NO_NAME_OR_BDAY
    exit
  end

  if !/\d{2}(\/)\d{2}/.match(input[1])
    print NO_BDAY
    exit
  end

  input_caps = input[0].upcase
  input_caps.each_char { |x|
    if !!/A|E|I|O|U/.match(x)
      puts "Give me an... #{x}"
    elsif !!/-/.match(x)
      #if name has dash, don't print the dash in the cheer
    else
      puts "Give me a... #{x}"
    end
  }
  puts "#{input_caps}'s just GRAND!"

  if !!/\d{2}(\/)\d{2}/.match(input[1])
    require 'date'
    today = Date.today
    bday = Date.parse(input[1])
    year = bday.year
    month = bday.month
    day = bday.mday
    parsed_date = Date.valid_date?(year,month,day)
    if parsed_date == true
      relational = today - bday
      relational_arr = relational.to_s.split('/')
      #difference = relational.to_s.split('/').chomp
      difference = relational_arr[0]
      if !!/(-)/.match(difference)
        days_till = difference.to_i.abs
        puts "\nAwesome! Your birthday is in #{days_till} days! Happy Birthday in advance!"
        exit
      end
      bday_next_year = 365 - difference.to_i.abs
      print "\nAwesome! Your birthday is in #{bday_next_year} days! Happy birthday in advance!"
      exit
    end
    print "You gave an invalid date!"
    exit
  end
    print NO_NAME_OR_BDAY
end


